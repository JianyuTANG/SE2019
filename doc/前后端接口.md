# 前后端接口



## 一、总体规范

1. 如无特殊情况，前端的请求方式为POST，正文格式为JSON

2. 如无特殊情况，后端响应正文为JSON格式

3. 前端除登录外的所有请求，正文中需带有键值对 **'session_code': 字符串** 供服务器确认客户端身份，其中，**字符串**为**登录**接口服务器所返回的同名键值对的值。

   后端的所有响应中，包含键值对 **'connection_status': 字符串** ，其中**字符串**的取值有：

   - 'acknowledged' 表明当前处于登录状态
   - 'rejected' 表明当前未登录，或session_code有误，请求被服务器拒绝
   - 'busy' 表明服务器忙，请稍后
   - 待续

   前端处理一切响应时，应首先验证'connection_status'的值。

## 二、接口

### 1.登录

- 地址：ip:port/login

- JSON正文：

  | 属性 | 类型   | 说明                           |
  | ---- | ------ | ------------------------------ |
  | code | string | wx.login()接口返回的同名属性值 |

- 响应JSON正文：

  | 属性              | 类型   | 说明                   |
  | ----------------- | ------ | ---------------------- |
  | connection_status | string | 见 **总体规范**        |
  | session_code      | string | 识别用户登录状态的标识 |
  | identity          | string | 用户校友身份标识       |

  其中，**identity** 的取值有:

  - 'guest' 游客，尚未通过思源人身份验证
  - 'alumni' 思源校友，已通过验证
  - 待后续讨论补充（企业号、管理员等）

